# Arbitrum Orbit Chain Demo

This repo is a demo codebase showing you how to deploy a custom rollup orbit chain on Arbitrum Sepolia.

Note: This code is only for demonstration purposes and should not be used in a production environment

# Prerequisites

- Docker
- Yarn
- Node version 22.17.1
- Some Arbitrum Sepolia ETH (around .15 eth)

# How to run

Follow these steps to deploy your own chain

1. Clone this repo
2. Run `nvm use` to use the node version required by this repo
3. Run `yarn install` to pull the dependencies of the project
4. Create an `.env` file and copy over the keys in the `sample.env` file. You can use the `PARENT_CHAIN_RPC` value as is from the sample but you'll have to provide a value for `DEPLOYER_PRIVATE_KEY` (remember to never commit your private key). Don't worry about `ORBIT_CHAIN_DEPLOYED_TX_HASH` for now
5. Run `make deploy-chain` to deploy and register your chain on the parent chain. Copy the transaction hash that is output on the console and set it as the value of `ORBIT_CHAIN_DEPLOYED_TX_HASH` in your `.env` file. Note: this will cost about .12 eth on Arbitrum Sepolia
6. Now with your chains contracts deployed, next we'll want to run the script called `GetNodeConfig` to produce a json representation of our chains configuration. First create a folder called `orbit-node` by `mkdir orbit-node` in the root of the project
7. Now let's have the `GetNodeConfig` actually create our node by running `make node-config`. Observe the `nodeConfig.json` file in the `orbit-node` folder
8. Now copy the `info-chain` value from the `nodeConfig.json` file and paste it as the value of `--chain.info-json` in the docker run command found in the makefile under `run-chain`
9. Now we'll actually run our chain against a locally running instance of a nitro node. In your terminal run `make run-chain` to boot up your chain
10. Open new terminal and try the following cURL command against your Nitro node to retrieve the chain id of our chain (randomly generated by our script)
```bash
curl -s -X POST http://localhost:8547 \
  -H "Content-Type: application/json" \
  -d '{"jsonrpc":"2.0","method":"eth_chainId","params":[],"id":1}'
```
11. Now take the resulting hex value and use a tool like cast (e.g. `cast to-dec the-hex-val`) or an online alternative to convert the hex value into a human readable value. The resulting value should be the chain id found in your `nodeConfig.json` file

# Resources
- ℹ️ Arbitrum Orbit Chain Docs - https://docs.arbitrum.io/launch-arbitrum-chain/a-gentle-introduction
- ℹ️ Arbitrum Orbit Chain Factory contracts - https://docs.arbitrum.io/launch-arbitrum-chain/deploy-an-arbitrum-chain/canonical-factory-contracts
- ℹ️ Arbitrum Orbit SDK - https://github.com/OffchainLabs/arbitrum-orbit-sdk
- ℹ️ Nitro contracts Repo - https://github.com/OffchainLabs/nitro-contracts
- ℹ️ Nitro Repo - https://github.com/OffchainLabs/nitro
- ℹ️ DevChain Deployment Transaction - https://sepolia.arbiscan.io/tx/0x29dadc2dbd4f02aa0d1327ea2cdec9624d47892dc8a311764348bd19aedb41eb